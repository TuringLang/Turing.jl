<h1 id="using-dynamichmc">Using DynamicHMC</h1>

<p>Turing supports the use of <a href="https://github.com/tpapp/DynamicHMC.jl">DynamicHMC</a> as a sampler through the <code class="language-plaintext highlighter-rouge">DynamicNUTS</code> function.</p>

<p><code class="language-plaintext highlighter-rouge">DynamicNUTS</code> is not appropriate for use in compositional inference. If you intend to use <a href="/docs/library/#Turing.Inference.Gibbs">Gibbs</a> sampling, you must use Turingâ€™s native <code class="language-plaintext highlighter-rouge">NUTS</code> function.</p>

<p>To use the <code class="language-plaintext highlighter-rouge">DynamicNUTS</code> function, you must import the <code class="language-plaintext highlighter-rouge">DynamicHMC</code> package as well as Turing. Turing does not formally require <code class="language-plaintext highlighter-rouge">DynamicHMC</code> but will include additional functionality if both packages are present.</p>

<p>Here is a brief example of how to apply <code class="language-plaintext highlighter-rouge">DynamicNUTS</code>:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Import Turing and DynamicHMC.</span>
<span class="k">using</span> <span class="n">LogDensityProblems</span><span class="x">,</span> <span class="n">DynamicHMC</span><span class="x">,</span> <span class="n">Turing</span>

<span class="c"># Model definition.</span>
<span class="nd">@model</span> <span class="n">gdemo</span><span class="x">(</span><span class="n">x</span><span class="x">,</span> <span class="n">y</span><span class="x">)</span> <span class="o">=</span> <span class="k">begin</span>
  <span class="n">s</span> <span class="o">~</span> <span class="n">InverseGamma</span><span class="x">(</span><span class="mi">2</span><span class="x">,</span> <span class="mi">3</span><span class="x">)</span>
  <span class="n">m</span> <span class="o">~</span> <span class="n">Normal</span><span class="x">(</span><span class="mi">0</span><span class="x">,</span> <span class="n">sqrt</span><span class="x">(</span><span class="n">s</span><span class="x">))</span>
  <span class="n">x</span> <span class="o">~</span> <span class="n">Normal</span><span class="x">(</span><span class="n">m</span><span class="x">,</span> <span class="n">sqrt</span><span class="x">(</span><span class="n">s</span><span class="x">))</span>
  <span class="n">y</span> <span class="o">~</span> <span class="n">Normal</span><span class="x">(</span><span class="n">m</span><span class="x">,</span> <span class="n">sqrt</span><span class="x">(</span><span class="n">s</span><span class="x">))</span>
<span class="k">end</span>

<span class="c"># Pull 2,000 samples using DynamicNUTS.</span>
<span class="n">chn</span> <span class="o">=</span> <span class="n">sample</span><span class="x">(</span><span class="n">gdemo</span><span class="x">(</span><span class="mf">1.5</span><span class="x">,</span> <span class="mf">2.0</span><span class="x">),</span> <span class="n">DynamicNUTS</span><span class="x">(),</span> <span class="mi">2000</span><span class="x">)</span>
</code></pre></div></div>
